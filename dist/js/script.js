"use strict";var colorTheme=document.querySelector(".colorTheme"),popUp=document.querySelector(".popUp"),popUpContent=document.querySelector(".popUpContent"),saveName=document.querySelector(".sendName"),menuPeople=document.querySelector(".for_people"),menuFilm=document.querySelector(".for_films"),containerItems=document.querySelector(".container__items"),singleItems=document.querySelector(".info__items");function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function connectionAPI(e){return createPreloader(),fetch(e).then((function(e){return e.json()})).then((function(e){return removePreloader(),e}))}function createElement(e,t){var n=document.createElement(e);return t&&n.setAttribute("class",t),n}function createPreloader(){var e=document.createElement("div"),t=document.createElement("img");e.setAttribute("class","preloader"),t.setAttribute("src","https://i.gifer.com/AvGf.gif"),e.appendChild(t),document.querySelector(".container").appendChild(e)}function removePreloader(){document.querySelector(".preloader").remove()}function createListPeople(e){var t=1,n=createElement("ul");n.setAttribute("class","list-people"),singleItems.classList.contains("film_wrapper")&&singleItems.classList.remove("film_wrapper"),e.results.map((function(e){var r=createElement("li");r.setAttribute("data-item",e.url),r.setAttribute("data-id",t++),r.textContent=e.name,n.appendChild(r)})),containerItems.appendChild(n),n.addEventListener("click",(function(e){var t=e.target;connectionAPI(t.getAttribute("data-item")).then((function(e){return createSingleItemsInfo(e,t)}))}))}function createSingleItemsInfo(e,t){var n=e,r=createElement("ul"),o=createElement("img");console.log(n);var i=1;for(var c in r.setAttribute("class","people__info-container"),o.setAttribute("src","https://starwars-visualguide.com/assets/img/characters/"+t.getAttribute("data-id")+".jpg"),o.setAttribute("class","foto-people"),n){if(i<=8){var l=createElement("li");l.textContent=c+" | "+n[c],r.appendChild(l)}i++}null!=singleItems.querySelector(".people__info-container")?(document.querySelector(".people__info-container").remove(),document.querySelector(".foto-people").remove(),singleItems.appendChild(o),singleItems.appendChild(r)):(singleItems.appendChild(o),singleItems.appendChild(r))}function createListFilms(e){var t=0,n=e.results,r=createElement("ul");r.setAttribute("class","film_container"),singleItems.classList.add("film_wrapper"),n.map((function(e){var n=createElement("li"),o=createElement("img"),i=createElement("h2"),c=createElement("p"),l=createElement("button");l.textContent="Show more",l.setAttribute("data-item",e.url),l.setAttribute("data-id",++t),o.setAttribute("src","https://starwars-visualguide.com/assets/img/films/"+t+".jpg"),i.textContent=e.title,c.textContent=e.opening_crawl.substr(0,50)+"...",n.appendChild(i),n.appendChild(o),n.appendChild(c),n.appendChild(l),r.appendChild(n)})),containerItems.appendChild(r),r.addEventListener("click",(function(e){var t=e.target;connectionAPI(t.getAttribute("data-item")).then((function(e){return createSingleFilm(e,t)}))}))}function createSingleFilm(e,t){var n=e,r=createElement("img"),o=createElement("ul"),i=createElement("ul");o.setAttribute("class","film__info-container"),i.setAttribute("class","characters"),r.setAttribute("src","https://starwars-visualguide.com/assets/img/films/"+t.getAttribute("data-id")+".jpg");var c=1;for(var l in n){if(c<=6){var a=createElement("li");a.textContent=l+" | "+n[l],o.appendChild(a)}c++}n.characters.map((function(e){connectionAPI(e).then((function(e){var t=createElement("li"),n=createElement("h2"),r=createElement("img"),o=e.url;o=o.substring(o.length-3,o.length-1),r.setAttribute("src","https://starwars-visualguide.com/assets/img/characters/"+o+".jpg"),n.textContent=e.name,t.appendChild(r),t.appendChild(n),i.appendChild(t)}))})),null!=singleItems.querySelector(".characters")?(document.querySelector(".film__info-container").remove(),document.querySelector(".characters").remove(),singleItems.appendChild(o),singleItems.appendChild(i)):(singleItems.appendChild(o),singleItems.appendChild(i))}document.addEventListener("DOMContentLoaded",(function(){getCookie("user")?(popUpContent.innerHTML="<p>Привет "+getCookie("user")+"</p>",popUp.style.display="block",saveName.textContent="Далее"):popUp.style.display="block"})),colorTheme.addEventListener("click",(function(){document.body.classList.contains("blackTheme")?document.body.classList.remove("blackTheme"):document.body.classList.add("blackTheme")})),saveName.addEventListener("click",(function(){var e=document.querySelector(".namePopUp");e&&(document.cookie="user="+e.value),popUp.style.display="none"})),menuPeople.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/people/").then((function(e){return createListPeople(e)})),null!=document.querySelector(".info__items")&&(document.querySelector(".info__items").textContent=""),null!=document.querySelector(".list-people")&&document.querySelector(".list-people").remove(),null!=document.querySelector(".film_container")&&document.querySelector(".film_container").remove()})),menuFilm.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/films/").then((function(e){return createListFilms(e)})),null!=document.querySelector(".info__items")&&(document.querySelector(".info__items").textContent=""),null!=document.querySelector(".list-people")&&document.querySelector(".list-people").remove(),null!=document.querySelector(".film_container")&&document.querySelector(".film_container").remove()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb2xvclRoZW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wVXAiLCJwb3BVcENvbnRlbnQiLCJzYXZlTmFtZSIsIm1lbnVQZW9wbGUiLCJtZW51RmlsbSIsImNvbnRhaW5lckl0ZW1zIiwic2luZ2xlSXRlbXMiLCJnZXRDb29raWUiLCJuYW1lIiwibWF0Y2hlcyIsImNvb2tpZSIsIm1hdGNoIiwiUmVnRXhwIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsInVuZGVmaW5lZCIsImNvbm5lY3Rpb25BUEkiLCJ1cmwiLCJjcmVhdGVQcmVsb2FkZXIiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJkYXRhIiwicmVtb3ZlUHJlbG9hZGVyIiwiY3JlYXRlRWxlbWVudCIsImVsZW10IiwiY2xhc3NFbGVtZW50IiwibmV3RWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInByZWxvZGFlciIsImltZ1ByZWxvYWRlciIsImFwcGVuZENoaWxkIiwicmVtb3ZlIiwiY3JlYXRlTGlzdFBlb3BsZSIsImkiLCJsaXN0UGVvcGxlQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZXN1bHRzIiwibWFwIiwiaXRlbSIsImxpc3RQZW9wbGUiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiY3JlYXRlU2luZ2xlSXRlbXNJbmZvIiwicGVvcGxlQXJyIiwic2luZ2xlSXRlbXNJbmZvIiwiaW1nUGVvcGxlIiwiY29uc29sZSIsImxvZyIsImluZGV4Iiwia2V5Iiwic2luZ2xlSXRlbXNBdHRyIiwiY3JlYXRlTGlzdEZpbG1zIiwiZmlsbUFyciIsImxpc3RGaWxtIiwiYWRkIiwic2luZ2xlRmlsbSIsImltYWdlRmlsbSIsInRpdGxlRmlsbSIsImRlc2NyaXB0aW9uRmlsbSIsImJ1dHRvU2hvd01vcmUiLCJzdWJzdHIiLCJjcmVhdGVTaW5nbGVGaWxtIiwiaW1hZ2UiLCJmaWxtSW5mbyIsImNoYXJhY3RlcnMiLCJTaW5nbGVGaWxtQXR0ciIsImVsIiwic2luZ2xlQ2hhcmFjdGVyIiwibmFtZUNoYXJhY3RlciIsInBob3RvQ2hhcmFjdGVyIiwibnVtQ2hhcmFjdGVyIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiaW5uZXJIVE1MIiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsIm5hbWVVc2VyIiwidmFsdWUiXSwibWFwcGluZ3MiOiJBQUFBLGFBQUEsSUFBTUEsV0FBYUMsU0FBU0MsY0FBYyxlQUVwQ0MsTUFBUUYsU0FBU0MsY0FBYyxVQUMvQkUsYUFBZUgsU0FBU0MsY0FBYyxpQkFDdENHLFNBQVdKLFNBQVNDLGNBQWMsYUFHbENJLFdBQWFMLFNBQVNDLGNBQWMsZUFDcENLLFNBQVdOLFNBQVNDLGNBQWMsY0FDbENNLGVBQWlCUCxTQUFTQyxjQUFjLHFCQUN4Q08sWUFBY1IsU0FBU0MsY0FBYyxnQkFrQzNDLFNBQVNRLFVBQVVDLEdBQ2YsSUFBTUMsRUFBVVgsU0FBU1ksT0FBT0MsTUFBTSxJQUFJQyxPQUN0QyxXQUFhSixFQUFLSyxRQUFRLCtCQUFnQyxRQUFVLGFBRXhFLE9BQU9KLEVBQVVLLG1CQUFtQkwsRUFBUSxTQUFNTSxFQUt0RCxTQUFTQyxjQUFjQyxHQUVuQixPQURBQyxrQkFDT0MsTUFBTUYsR0FDUkcsTUFBSyxTQUFBQyxHQUFRLE9BQUlBLEVBQVNDLFVBQzFCRixNQUFLLFNBQUNHLEdBRUgsT0FEQUMsa0JBQ09ELEtBS25CLFNBQVNFLGNBQWNDLEVBQU9DLEdBQzFCLElBQUlDLEVBQWE5QixTQUFTMkIsY0FBY0MsR0FJeEMsT0FISUMsR0FDQUMsRUFBV0MsYUFBYSxRQUFTRixHQUU5QkMsRUFJWCxTQUFTVixrQkFDTCxJQUFNWSxFQUFZaEMsU0FBUzJCLGNBQWMsT0FDbkNNLEVBQWVqQyxTQUFTMkIsY0FBYyxPQUM1Q0ssRUFBVUQsYUFBYSxRQUFTLGFBQ2hDRSxFQUFhRixhQUFhLE1BQU8sZ0NBQ2pDQyxFQUFVRSxZQUFZ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RFAsTUFBTWdGLE1BQU1DLFFBQVUsUUFDdEIvRSxTQUFTeUMsWUFBYyxTQUV2QjNDLE1BQU1nRixNQUFNQyxRQUFVLFdBSzlCcEYsV0FBVytDLGlCQUFpQixTQUFTLFdBQzdCOUMsU0FBU29GLEtBQUs3QyxVQUFVQyxTQUFTLGNBQ2pDeEMsU0FBU29GLEtBQUs3QyxVQUFVSixPQUFPLGNBRS9CbkMsU0FBU29GLEtBQUs3QyxVQUFVdUIsSUFBSSxpQkFNcEMxRCxTQUFTMEMsaUJBQWlCLFNBQVMsV0FDL0IsSUFBTXVDLEVBQVdyRixTQUFTQyxjQUFjLGNBQ3BDb0YsSUFDQXJGLFNBQVNZLE9BQVMsUUFBVXlFLEVBQVNDLE9BRXpDcEYsTUFBTWdGLE1BQU1DLFFBQVUsVUFpRDFCOUUsV0FBV3lDLGlCQUFpQixTQUFTLFdBRWQ1QixjQURQLGdDQUVESSxNQUFLLFNBQUFHLEdBQUksT0FBSVcsaUJBQWlCWCxNQUVJLE1BQTFDekIsU0FBU0MsY0FBYyxrQkFDdEJELFNBQVNDLGNBQWMsZ0JBQWdCNEMsWUFBYyxJQUVaLE1BQTFDN0MsU0FBU0MsY0FBYyxpQkFDdEJELFNBQVNDLGNBQWMsZ0JBQWdCa0MsU0FFSSxNQUE1Q25DLFNBQVNDLGNBQWMsb0JBQ3RCRCxTQUFTQyxjQUFjLG1CQUFtQmtDLFlBbUVsRDdCLFNBQVN3QyxpQkFBaUIsU0FBUyxXQUViNUIsY0FETiwrQkFFRkksTUFBSyxTQUFBRyxHQUFJLE9BQUlrQyxnQkFBZ0JsQyxNQUVNLE1BQTFDekIsU0FBU0MsY0FBYyxrQkFDdEJELFNBQVNDLGNBQWMsZ0JBQWdCNEMsWUFBYyxJQUVaLE1BQTFDN0MsU0FBU0MsY0FBYyxpQkFDdEJELFNBQVNDLGNBQWMsZ0JBQWdCa0MsU0FFSSxNQUE1Q25DLFNBQVNDLGNBQWMsb0JBQ3RCRCxTQUFTQyxjQUFjLG1CQUFtQmtDIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbG9yVGhlbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sb3JUaGVtZScpO1xyXG5cclxuY29uc3QgcG9wVXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wVXAnKTtcclxuY29uc3QgcG9wVXBDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcFVwQ29udGVudCcpO1xyXG5jb25zdCBzYXZlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZW5kTmFtZScpO1xyXG5cclxuXHJcbmNvbnN0IG1lbnVQZW9wbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9yX3Blb3BsZScpO1xyXG5jb25zdCBtZW51RmlsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JfZmlsbXMnKTtcclxuY29uc3QgY29udGFpbmVySXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyX19pdGVtcycpO1xyXG5jb25zdCBzaW5nbGVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvX19pdGVtcycpO1xyXG5cclxuXHJcbi8v0LfQsNC/0YPRgdC60LDQsNC10Lwg0L/QvtC/0LDQv1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGdldENvb2tpZSgndXNlcicpKSB7XHJcbiAgICAgICAgcG9wVXBDb250ZW50LmlubmVySFRNTCA9ICc8cD7Qn9GA0LjQstC10YIgJyArIGdldENvb2tpZSgndXNlcicpICsgJzwvcD4nO1xyXG4gICAgICAgIHBvcFVwLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgc2F2ZU5hbWUudGV4dENvbnRlbnQgPSBcItCU0LDQu9C10LVcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH1cclxufSlcclxuXHJcbi8v0LzQtdC90Y/QtdC8INGG0LLQtdGCINGC0LXQvNGLXHJcbmNvbG9yVGhlbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2JsYWNrVGhlbWUnKSkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYmxhY2tUaGVtZScpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYmxhY2tUaGVtZScpXHJcbiAgICB9XHJcblxyXG59KVxyXG5cclxuLy/RgdC+0YXRgNCw0L3Rj9C10Lwg0LjQvNGPINCyINC60YPQutC4XHJcbnNhdmVOYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgbmFtZVVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmFtZVBvcFVwJylcclxuICAgIGlmIChuYW1lVXNlcikge1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwidXNlcj1cIiArIG5hbWVVc2VyLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59KVxyXG5cclxuLy/Qv9C+0LvRg9GH0LDQtdC8INC60YPQutC4XHJcbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XHJcbiAgICBjb25zdCBtYXRjaGVzID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoXHJcbiAgICAgICAgXCIoPzpefDsgKVwiICsgbmFtZS5yZXBsYWNlKC8oW1xcLiQ/Knx7fVxcKFxcKVxcW1xcXVxcXFxcXC9cXCteXSkvZywgJ1xcXFwkMScpICsgXCI9KFteO10qKVwiXHJcbiAgICApKVxyXG4gICAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWRcclxufVxyXG5cclxuXHJcbi8vQ29ubmVjdGlvblxyXG5mdW5jdGlvbiBjb25uZWN0aW9uQVBJKHVybCkge1xyXG4gICAgY3JlYXRlUHJlbG9hZGVyKClcclxuICAgIHJldHVybiBmZXRjaCh1cmwpXHJcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbW92ZVByZWxvYWRlcigpXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgfSlcclxufVxyXG5cclxuLy9DcmVhdGUgRWxlbWVudFxyXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW10LCBjbGFzc0VsZW1lbnQpIHtcclxuICAgIGxldCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtdCk7XHJcbiAgICBpZiAoY2xhc3NFbGVtZW50KSB7XHJcbiAgICAgICAgbmV3RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdFbGVtZW50O1xyXG59XHJcblxyXG4vL2Z1bmN0aW9uIHByZWxvYWRlclxyXG5mdW5jdGlvbiBjcmVhdGVQcmVsb2FkZXIoKSB7XHJcbiAgICBjb25zdCBwcmVsb2RhZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGltZ1ByZWxvYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcbiAgICBwcmVsb2RhZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdwcmVsb2FkZXInKTtcclxuICAgIGltZ1ByZWxvYWRlci5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL2kuZ2lmZXIuY29tL0F2R2YuZ2lmJyk7XHJcbiAgICBwcmVsb2RhZXIuYXBwZW5kQ2hpbGQoaW1nUHJlbG9hZGVyKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKS5hcHBlbmRDaGlsZChwcmVsb2RhZXIpXHJcbn1cclxuXHJcbi8vcmVtb3ZlUHJlbG9hZGVyXHJcbmZ1bmN0aW9uIHJlbW92ZVByZWxvYWRlcigpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKS5yZW1vdmUoKTtcclxufVxyXG5cclxuXHJcbi8vINCy0YvQt9C+0LIg0YHQv9C40YHQutCwINC70Y7QtNC10LlcclxubWVudVBlb3BsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHVybCA9IFwiaHR0cHM6Ly9zd2FwaS5jby9hcGkvcGVvcGxlL1wiXHJcbiAgICBjb25zdCBwZW9wbGVKU09OID0gY29ubmVjdGlvbkFQSSh1cmwpO1xyXG4gICAgcGVvcGxlSlNPTi50aGVuKGRhdGEgPT4gY3JlYXRlTGlzdFBlb3BsZShkYXRhKSlcclxuXHJcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mb19faXRlbXMnKSAhPSBudWxsKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mb19faXRlbXMnKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfVxyXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtcGVvcGxlJykgIT0gbnVsbCl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtcGVvcGxlJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsbV9jb250YWluZXInKSAhPW51bGwpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxtX2NvbnRhaW5lcicpLnJlbW92ZSgpXHJcbiAgICB9XHJcbn0pXHJcblxyXG4vL9GB0L7Qt9C00LDQvdC40LUg0YHQv9C40YHQutCwINC70Y7QtNC10LlcclxuZnVuY3Rpb24gY3JlYXRlTGlzdFBlb3BsZShkYXRhKSB7XHJcbiAgICBsZXQgaSA9IDE7XHJcbiAgICBjb25zdCBsaXN0UGVvcGxlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgIGxpc3RQZW9wbGVDb250YWluZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaXN0LXBlb3BsZScpO1xyXG4gICAgaWYoc2luZ2xlSXRlbXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWxtX3dyYXBwZXInKSl7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuY2xhc3NMaXN0LnJlbW92ZSgnZmlsbV93cmFwcGVyJylcclxuICAgIH1cclxuICAgIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgbGV0IGxpc3RQZW9wbGUgPSBjcmVhdGVFbGVtZW50KCdsaScpXHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGUuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0nLCBpdGVtWyd1cmwnXSlcclxuICAgICAgICAgICAgbGlzdFBlb3BsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKyspXHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGUudGV4dENvbnRlbnQgPSBpdGVtWyduYW1lJ107XHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGVDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdFBlb3BsZSlcclxuICAgICAgICB9XHJcbiAgICApXHJcbiAgICBjb250YWluZXJJdGVtcy5hcHBlbmRDaGlsZChsaXN0UGVvcGxlQ29udGFpbmVyKTtcclxuXHJcbiAgICBsaXN0UGVvcGxlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICBsZXQgc2luZ2xlUGVyc29uID0gY29ubmVjdGlvbkFQSSh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0nKSk7XHJcbiAgICAgICAgc2luZ2xlUGVyc29uLnRoZW4oZGF0YSA9PiBjcmVhdGVTaW5nbGVJdGVtc0luZm8oZGF0YSwgdGFyZ2V0KSlcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vQ9C+0LfQtNCw0L3QuNC1INC40L3RhNGLINC+0LEg0L7QtNC90L7QvCDRh9C10LvQvtCy0LXQutC1XHJcbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUl0ZW1zSW5mbyhkYXRhLHRhcmdldCkge1xyXG4gICAgY29uc3QgcGVvcGxlQXJyID0gZGF0YVxyXG4gICAgY29uc3Qgc2luZ2xlSXRlbXNJbmZvID0gY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgIGNvbnN0IGltZ1Blb3BsZSA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc29sZS5sb2cocGVvcGxlQXJyKTtcclxuICAgIGxldCBpbmRleCA9IDE7XHJcblxyXG4gICAgc2luZ2xlSXRlbXNJbmZvLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncGVvcGxlX19pbmZvLWNvbnRhaW5lcicpO1xyXG4gICAgaW1nUGVvcGxlLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vc3RhcndhcnMtdmlzdWFsZ3VpZGUuY29tL2Fzc2V0cy9pbWcvY2hhcmFjdGVycy8nICsgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpICsgJy5qcGcnKTtcclxuICAgIGltZ1Blb3BsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZvdG8tcGVvcGxlJyk7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcGVvcGxlQXJyKSB7XHJcblxyXG4gICAgICAgIGlmIChpbmRleCA8PSA4KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaW5nbGVJdGVtc0F0dHIgPSBjcmVhdGVFbGVtZW50KCdsaScpXHJcbiAgICAgICAgICAgIHNpbmdsZUl0ZW1zQXR0ci50ZXh0Q29udGVudCA9IGtleSArICcgfCAnICsgcGVvcGxlQXJyW2tleV07XHJcblxyXG4gICAgICAgICAgICBzaW5nbGVJdGVtc0luZm8uYXBwZW5kQ2hpbGQoc2luZ2xlSXRlbXNBdHRyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5kZXgrK1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzaW5nbGVJdGVtcy5xdWVyeVNlbGVjdG9yKCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpICE9IG51bGwpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpLnJlbW92ZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3RvLXBlb3BsZScpLnJlbW92ZSgpO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGltZ1Blb3BsZSk7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoc2luZ2xlSXRlbXNJbmZvKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoaW1nUGVvcGxlKTtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChzaW5nbGVJdGVtc0luZm8pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG4vL9Cy0YvQt9C+0LIg0YHQv9C40YHQutCwINGE0LjQu9GM0LzQvtCyXHJcbm1lbnVGaWxtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdXJsID0gXCJodHRwczovL3N3YXBpLmNvL2FwaS9maWxtcy9cIlxyXG4gICAgY29uc3QgZmlsbXNKU09OID0gY29ubmVjdGlvbkFQSSh1cmwpO1xyXG4gICAgZmlsbXNKU09OLnRoZW4oZGF0YSA9PiBjcmVhdGVMaXN0RmlsbXMoZGF0YSkpXHJcblxyXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm9fX2l0ZW1zJykgIT0gbnVsbCl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm9fX2l0ZW1zJykudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH1cclxuICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LXBlb3BsZScpICE9IG51bGwpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LXBlb3BsZScpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbG1fY29udGFpbmVyJykgIT1udWxsKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsbV9jb250YWluZXInKS5yZW1vdmUoKVxyXG4gICAgfVxyXG59KVxyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INGB0L/QuNGB0LrQsCDRhNC40LvRjNC80L7QslxyXG5mdW5jdGlvbiBjcmVhdGVMaXN0RmlsbXMoZGF0YSkge1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgZmlsbUFyciA9IGRhdGEucmVzdWx0c1xyXG4gICAgY29uc3QgbGlzdEZpbG0gPSBjcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgbGlzdEZpbG0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdmaWxtX2NvbnRhaW5lcicpO1xyXG4gICAgc2luZ2xlSXRlbXMuY2xhc3NMaXN0LmFkZCgnZmlsbV93cmFwcGVyJylcclxuXHJcbiAgICBmaWxtQXJyLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBsZXQgc2luZ2xlRmlsbSA9IGNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuICAgICAgICAgICAgbGV0IGltYWdlRmlsbSA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcbiAgICAgICAgICAgIGxldCB0aXRsZUZpbG0gPSBjcmVhdGVFbGVtZW50KCdoMicpXHJcbiAgICAgICAgICAgIGxldCBkZXNjcmlwdGlvbkZpbG0gPSBjcmVhdGVFbGVtZW50KCdwJylcclxuICAgICAgICAgICAgbGV0IGJ1dHRvU2hvd01vcmUgPSBjcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cclxuICAgICAgICAgICAgYnV0dG9TaG93TW9yZS50ZXh0Q29udGVudCA9ICdTaG93IG1vcmUnO1xyXG4gICAgICAgICAgICBidXR0b1Nob3dNb3JlLnNldEF0dHJpYnV0ZSgnZGF0YS1pdGVtJywgaXRlbVsndXJsJ10pXHJcbiAgICAgICAgICAgIGJ1dHRvU2hvd01vcmUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgKytpKVxyXG5cclxuICAgICAgICAgICAgaW1hZ2VGaWxtLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vc3RhcndhcnMtdmlzdWFsZ3VpZGUuY29tL2Fzc2V0cy9pbWcvZmlsbXMvJyArIGkgKyAnLmpwZycpXHJcbiAgICAgICAgICAgIHRpdGxlRmlsbS50ZXh0Q29udGVudCA9IGl0ZW1bJ3RpdGxlJ11cclxuICAgICAgICAgICAgZGVzY3JpcHRpb25GaWxtLnRleHRDb250ZW50ID0gaXRlbVsnb3BlbmluZ19jcmF3bCddLnN1YnN0cigwLCA1MCkgKyAnLi4uJ1xyXG5cclxuXHJcbiAgICAgICAgICAgIHNpbmdsZUZpbG0uYXBwZW5kQ2hpbGQodGl0bGVGaWxtKVxyXG4gICAgICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKGltYWdlRmlsbSlcclxuICAgICAgICAgICAgc2luZ2xlRmlsbS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkZpbG0pXHJcbiAgICAgICAgICAgIHNpbmdsZUZpbG0uYXBwZW5kQ2hpbGQoYnV0dG9TaG93TW9yZSlcclxuICAgICAgICAgICAgbGlzdEZpbG0uYXBwZW5kQ2hpbGQoc2luZ2xlRmlsbSlcclxuICAgICAgICB9XHJcbiAgICApXHJcbiAgICBjb250YWluZXJJdGVtcy5hcHBlbmRDaGlsZChsaXN0RmlsbSlcclxuXHJcbiAgICBsaXN0RmlsbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgbGV0IHNpbmdsZVBlcnNvbiA9IGNvbm5lY3Rpb25BUEkodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pdGVtJykpO1xyXG4gICAgICAgIHNpbmdsZVBlcnNvbi50aGVuKGRhdGEgPT4gY3JlYXRlU2luZ2xlRmlsbShkYXRhLCB0YXJnZXQpKVxyXG4gICAgfSlcclxufVxyXG5cclxuLy/QktGL0LLQvtC0INC40L3RhNGLINC+0LEg0L7QtNC90L7QvCDRhNC40LvRjNC80LVcclxuZnVuY3Rpb24gY3JlYXRlU2luZ2xlRmlsbShkYXRhLCB0YXJnZXQpIHtcclxuICAgIGNvbnN0IGZpbG1BcnIgPSBkYXRhO1xyXG4gICAgY29uc3QgaW1hZ2UgPSBjcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgY29uc3QgZmlsbUluZm8gPSBjcmVhdGVFbGVtZW50KCd1bCcpXHJcbiAgICBjb25zdCBjaGFyYWN0ZXJzID0gY3JlYXRlRWxlbWVudCgndWwnKVxyXG5cclxuICAgIGZpbG1JbmZvLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmlsbV9faW5mby1jb250YWluZXInKTtcclxuICAgIGNoYXJhY3RlcnMuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjaGFyYWN0ZXJzJyk7XHJcbiAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2ZpbG1zLycgKyB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgKyAnLmpwZycpXHJcblxyXG4gICAgbGV0IGluZGV4ID0gMTtcclxuXHJcblxyXG4gICAgZm9yIChsZXQga2V5IGluIGZpbG1BcnIpIHtcclxuICAgICAgICBpZiAoaW5kZXggPD0gNikge1xyXG4gICAgICAgICAgICBjb25zdCBTaW5nbGVGaWxtQXR0ciA9IGNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuICAgICAgICAgICAgU2luZ2xlRmlsbUF0dHIudGV4dENvbnRlbnQgPSBrZXkgKyAnIHwgJyArIGZpbG1BcnJba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGZpbG1JbmZvLmFwcGVuZENoaWxkKFNpbmdsZUZpbG1BdHRyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5kZXgrK1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmaWxtQXJyWydjaGFyYWN0ZXJzJ10ubWFwKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGxldCBzaW5nbGVDaGFyYWN0ZXIgPSBjb25uZWN0aW9uQVBJKGVsKTtcclxuICAgICAgICBzaW5nbGVDaGFyYWN0ZXIudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG5cclxuICAgICAgICAgICAgbGV0IHNpbmdsZUNoYXJhY3RlciA9IGNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgIGxldCBuYW1lQ2hhcmFjdGVyID0gY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICAgICAgICAgICAgbGV0IHBob3RvQ2hhcmFjdGVyID0gY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbnVtQ2hhcmFjdGVyID0gZGF0YVsndXJsJ11cclxuICAgICAgICAgICAgbnVtQ2hhcmFjdGVyID0gbnVtQ2hhcmFjdGVyLnN1YnN0cmluZyhudW1DaGFyYWN0ZXIubGVuZ3RoIC0gMywgbnVtQ2hhcmFjdGVyLmxlbmd0aCAtIDEpXHJcblxyXG4gICAgICAgICAgICBwaG90b0NoYXJhY3Rlci5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2NoYXJhY3RlcnMvJyArIG51bUNoYXJhY3RlciArICcuanBnJylcclxuICAgICAgICAgICAgbmFtZUNoYXJhY3Rlci50ZXh0Q29udGVudCA9IGRhdGFbJ25hbWUnXVxyXG4gICAgICAgICAgICBzaW5nbGVDaGFyYWN0ZXIuYXBwZW5kQ2hpbGQocGhvdG9DaGFyYWN0ZXIpXHJcbiAgICAgICAgICAgIHNpbmdsZUNoYXJhY3Rlci5hcHBlbmRDaGlsZChuYW1lQ2hhcmFjdGVyKVxyXG4gICAgICAgICAgICBjaGFyYWN0ZXJzLmFwcGVuZENoaWxkKHNpbmdsZUNoYXJhY3RlcilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgIGlmIChzaW5nbGVJdGVtcy5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVycycpICE9IG51bGwpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsbV9faW5mby1jb250YWluZXInKS5yZW1vdmUoKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVycycpLnJlbW92ZSgpO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGZpbG1JbmZvKTtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChjaGFyYWN0ZXJzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoZmlsbUluZm8pO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGNoYXJhY3RlcnMpO1xyXG4gICAgfVxyXG5cclxufSJdfQ==
