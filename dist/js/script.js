"use strict";var menuPeople=document.querySelector(".for_people"),menuFilm=document.querySelector(".for_films"),containerItems=document.querySelector(".container__items"),singleItems=document.querySelector(".info__items");function connectionAPI(e){return createPreloader(),fetch(e).then((function(e){return e.json()})).then((function(e){return removePreloader(),e}))}function createElement(e,t){var n=document.createElement(e);return t&&n.setAttribute("class",t),n}function removeElement(e){document.querySelector(e).remove()}function createPreloader(){var e=document.createElement("div"),t=document.createElement("img");e.setAttribute("class","preloader"),t.setAttribute("src","https://i.gifer.com/AvGf.gif"),e.appendChild(t),document.querySelector(".container").appendChild(e)}function removePreloader(){document.querySelector(".preloader").remove()}function showItemInfo(e){containerItems.addEventListener("click",(function(t){var n=t.target,r=n.getAttribute("data-item");console.log(r),connectionAPI(r).then((function(t){return e(t,n)}))}))}function createListPeople(e){var t=1,n=createElement("ul");n.setAttribute("class","list-people"),e.results.map((function(e){var r=createElement("li");r.setAttribute("data-item",e.url),r.setAttribute("data-id",t++),r.textContent=e.name,n.appendChild(r)})),containerItems.appendChild(n),showItemInfo(createSingleItemsInfo)}function createSingleItemsInfo(e,t){var n=e,r=createElement("ul"),o=createElement("img"),l=1;for(var i in r.setAttribute("class","people__info-container"),o.setAttribute("src","https://starwars-visualguide.com/assets/img/characters/"+t.getAttribute("data-id")+".jpg"),o.setAttribute("class","foto-people"),n){if(l<=8){var c=createElement("li");c.textContent=i+" | "+n[i],r.appendChild(c)}l++}null!=singleItems.querySelector(".people__info-container")?(removeElement(".people__info-container"),removeElement(".foto-people"),singleItems.appendChild(o),singleItems.appendChild(r)):(singleItems.appendChild(o),singleItems.appendChild(r))}function createListFilms(e){var t=0,n=e.results,r=createElement("ul");r.setAttribute("class","film_container"),n.map((function(e){console.log(e);var n=createElement("li"),o=createElement("img"),l=createElement("h2"),i=createElement("p");n.setAttribute("data-item",e.url),n.setAttribute("data-id",t++),o.setAttribute("src","https://starwars-visualguide.com/assets/img/films/"+t+".jpg"),l.textContent=e.title,i.textContent=e.opening_crawl.substr(0,50)+"...",n.appendChild(l),n.appendChild(o),n.appendChild(i),r.appendChild(n)})),containerItems.appendChild(r)}menuPeople.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/people/").then((function(e){return createListPeople(e)})),null!=containerItems.querySelector(".list-people")||null!=singleItems.querySelector(".people__info-container")?(removeElement(".list-people"),removeElement(".people__info-container"),removeElement(".foto-people")):null!=containerItems.querySelector(".film_container")&&removeElement(".film_container")})),menuFilm.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/films/").then((function(e){return createListFilms(e)})),null!=containerItems.querySelector(".list-people")||null!=singleItems.querySelector(".people__info-container")?(removeElement(".list-people"),removeElement(".people__info-container"),removeElement(".foto-people")):null!=containerItems.querySelector(".list-people")&&removeElement(".list-people")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJtZW51UGVvcGxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudUZpbG0iLCJjb250YWluZXJJdGVtcyIsInNpbmdsZUl0ZW1zIiwiY29ubmVjdGlvbkFQSSIsInVybCIsImNyZWF0ZVByZWxvYWRlciIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJyZW1vdmVQcmVsb2FkZXIiLCJjcmVhdGVFbGVtZW50IiwiZWxlbXQiLCJjbGFzc0VsZW1lbnQiLCJuZXdFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlRWxlbWVudCIsImVsZW0iLCJyZW1vdmUiLCJwcmVsb2RhZXIiLCJpbWdQcmVsb2FkZXIiLCJhcHBlbmRDaGlsZCIsInNob3dJdGVtSW5mbyIsImZ1bmMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVMaXN0UGVvcGxlIiwiaSIsImxpc3RQZW9wbGVDb250YWluZXIiLCJyZXN1bHRzIiwibWFwIiwiaXRlbSIsImxpc3RQZW9wbGUiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZVNpbmdsZUl0ZW1zSW5mbyIsInBlb3BsZUFyciIsInNpbmdsZUl0ZW1zSW5mbyIsImltZ1Blb3BsZSIsImluZGV4Iiwia2V5Iiwic2luZ2xlSXRlbXNBdHRyIiwiY3JlYXRlTGlzdEZpbG1zIiwiZmlsbUFyciIsImxpc3RGaWxtIiwic2luZ2xlRmlsbSIsImltYWdlRmlsbSIsInRpdGxlRmlsbSIsImRlc2NyaXB0aW9uRmlsbSIsInN1YnN0ciJdLCJtYXBwaW5ncyI6IkFBQUEsYUFBQSxJQUFNQSxXQUFhQyxTQUFTQyxjQUFjLGVBQ3BDQyxTQUFXRixTQUFTQyxjQUFjLGNBQ2xDRSxlQUFpQkgsU0FBU0MsY0FBYyxxQkFDeENHLFlBQWNKLFNBQVNDLGNBQWMsZ0JBSTNDLFNBQVNJLGNBQWNDLEdBRW5CLE9BREFDLGtC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QUN2QkQsRUFBVzNCLFlBQVk4QixHQUN2QkosRUFBUzFCLFlBQVkyQixNQUd6QmhELGVBQWVxQixZQUFZMEIsR0F0SC9CbkQsV0FBVzRCLGlCQUFpQixTQUFTLFdBRWR0QixjQURQLGdDQUVESSxNQUFLLFNBQUFHLEdBQUksT0FBSXFCLGlCQUFpQnJCLE1BR1UsTUFBaERULGVBQWVGLGNBQWMsaUJBQzRCLE1BQXhERyxZQUFZSCxjQUFjLDRCQUMxQmtCLGNBQWMsZ0JBQ2RBLGNBQWMsMkJBQ2RBLGNBQWMsaUJBRTJDLE1BQW5EaEIsZUFBZUYsY0FBYyxvQkFDbkNrQixjQUFjLHNCQTJEdEJqQixTQUFTeUIsaUJBQWlCLFNBQVEsV0FFWnRCLGNBRE4sK0JBRUZJLE1BQUssU0FBQUcsR0FBSSxPQUFJb0MsZ0JBQWdCcEMsTUFHWSxNQUFoRFQsZUFBZUYsY0FBYyxpQkFDNEIsTUFBeERHLFlBQVlILGNBQWMsNEJBQzFCa0IsY0FBYyxnQkFDZEEsY0FBYywyQkFDZEEsY0FBYyxpQkFFd0MsTUFBaERoQixlQUFlRixjQUFjLGlCQUNuQ2tCLGNBQWMiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWVudVBlb3BsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JfcGVvcGxlJyk7XHJcbmNvbnN0IG1lbnVGaWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcl9maWxtcycpO1xyXG5jb25zdCBjb250YWluZXJJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXJfX2l0ZW1zJyk7XHJcbmNvbnN0IHNpbmdsZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm9fX2l0ZW1zJyk7XHJcblxyXG5cclxuLy9Db25uZWN0aW9uXHJcbmZ1bmN0aW9uIGNvbm5lY3Rpb25BUEkodXJsKSB7XHJcbiAgICBjcmVhdGVQcmVsb2FkZXIoKVxyXG4gICAgcmV0dXJuIGZldGNoKHVybClcclxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgcmVtb3ZlUHJlbG9hZGVyKClcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgICB9KVxyXG59XHJcblxyXG4vL0NyZWF0ZSBFbGVtZW50XHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQgKGVsZW10LCBjbGFzc0VsZW1lbnQgKXtcclxuICAgIGxldCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtdCk7XHJcbiAgICBpZihjbGFzc0VsZW1lbnQpe1xyXG4gICAgICAgIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNsYXNzRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3RWxlbWVudDtcclxufVxyXG4vL3JlbW92ZSBFbGVtZW50XHJcbmZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQgKGVsZW0pe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKS5yZW1vdmUoKTtcclxufVxyXG4vL2Z1bmN0aW9uIHByZWxvYWRlclxyXG5mdW5jdGlvbiBjcmVhdGVQcmVsb2FkZXIoKXtcclxuICAgIGNvbnN0IHByZWxvZGFlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgaW1nUHJlbG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgIHByZWxvZGFlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ByZWxvYWRlcicpO1xyXG4gICAgaW1nUHJlbG9hZGVyLnNldEF0dHJpYnV0ZSgnc3JjJywnaHR0cHM6Ly9pLmdpZmVyLmNvbS9BdkdmLmdpZicpO1xyXG4gICAgcHJlbG9kYWVyLmFwcGVuZENoaWxkKGltZ1ByZWxvYWRlcik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuYXBwZW5kQ2hpbGQocHJlbG9kYWVyKVxyXG59XHJcblxyXG4vL3JlbW92ZVByZWxvYWRlclxyXG5mdW5jdGlvbiByZW1vdmVQcmVsb2FkZXIoKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKS5yZW1vdmUoKTtcclxufVxyXG5cclxuLy9zaG93SXRlbUluZm9cclxuZnVuY3Rpb24gc2hvd0l0ZW1JbmZvKGZ1bmMpe1xyXG4gICAgY29udGFpbmVySXRlbXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbScpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHVybCk7XHJcbiAgICAgICAgY29uc3Qgc2luZ2xlSXRlbXMgPSBjb25uZWN0aW9uQVBJKHVybCk7XHJcblxyXG4gICAgICAgIHNpbmdsZUl0ZW1zLnRoZW4oZGF0YSA9PiBmdW5jKGRhdGEsdGFyZ2V0KSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5tZW51UGVvcGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdXJsID0gXCJodHRwczovL3N3YXBpLmNvL2FwaS9wZW9wbGUvXCJcclxuICAgIGNvbnN0IHBlb3BsZUpTT04gPSBjb25uZWN0aW9uQVBJKHVybCk7XHJcbiAgICBwZW9wbGVKU09OLnRoZW4oZGF0YSA9PiBjcmVhdGVMaXN0UGVvcGxlKGRhdGEpKVxyXG5cclxuXHJcbiAgICBpZihjb250YWluZXJJdGVtcy5xdWVyeVNlbGVjdG9yKCcubGlzdC1wZW9wbGUnKSAhPSBudWxsIHx8XHJcbiAgICAgICAgc2luZ2xlSXRlbXMucXVlcnlTZWxlY3RvcignLnBlb3BsZV9faW5mby1jb250YWluZXInKSAhPSBudWxsKXtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcubGlzdC1wZW9wbGUnKTtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5mb3RvLXBlb3BsZScpO1xyXG5cclxuICAgIH0gZWxzZSBpZihjb250YWluZXJJdGVtcy5xdWVyeVNlbGVjdG9yKCcuZmlsbV9jb250YWluZXInKSAhPSBudWxsKXtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuZmlsbV9jb250YWluZXInKTtcclxuICAgIH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxpc3RQZW9wbGUoZGF0YSkge1xyXG4gICAgbGV0IGkgPSAxO1xyXG4gICAgY29uc3QgbGlzdFBlb3BsZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgICBsaXN0UGVvcGxlQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCdsaXN0LXBlb3BsZScpO1xyXG5cclxuICAgIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgbGV0IGxpc3RQZW9wbGUgPSBjcmVhdGVFbGVtZW50KCdsaScpXHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGUuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0nLCBpdGVtWyd1cmwnXSlcclxuICAgICAgICAgICAgbGlzdFBlb3BsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKyspXHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGUudGV4dENvbnRlbnQgPSBpdGVtWyduYW1lJ107XHJcbiAgICAgICAgICAgIGxpc3RQZW9wbGVDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdFBlb3BsZSlcclxuICAgICAgICB9XHJcbiAgICApXHJcbiAgICBjb250YWluZXJJdGVtcy5hcHBlbmRDaGlsZChsaXN0UGVvcGxlQ29udGFpbmVyKTtcclxuICAgIHNob3dJdGVtSW5mbyhjcmVhdGVTaW5nbGVJdGVtc0luZm8pXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUl0ZW1zSW5mbyhkYXRhLHRhcmdldCkge1xyXG4gICAgY29uc3QgcGVvcGxlQXJyID0gZGF0YTtcclxuICAgIGNvbnN0IHNpbmdsZUl0ZW1zSW5mbyA9IGNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgICBjb25zdCBpbWdQZW9wbGUgPSBjcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHJcbiAgICBsZXQgaW5kZXggPSAxO1xyXG5cclxuICAgIHNpbmdsZUl0ZW1zSW5mby5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Blb3BsZV9faW5mby1jb250YWluZXInKTtcclxuICAgIGltZ1Blb3BsZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2NoYXJhY3RlcnMvJyt0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykrJy5qcGcnKTtcclxuICAgIGltZ1Blb3BsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnZm90by1wZW9wbGUnKTtcclxuICAgIGZvcihsZXQga2V5IGluIHBlb3BsZUFycil7XHJcblxyXG4gICAgICAgIGlmKGluZGV4IDw9IDgpe1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2luZ2xlSXRlbXNBdHRyID0gY3JlYXRlRWxlbWVudCgnbGknKVxyXG4gICAgICAgICAgICBzaW5nbGVJdGVtc0F0dHIudGV4dENvbnRlbnQgPSBrZXkgKyAnIHwgJyArIHBlb3BsZUFycltrZXldO1xyXG5cclxuICAgICAgICAgICAgc2luZ2xlSXRlbXNJbmZvLmFwcGVuZENoaWxkKHNpbmdsZUl0ZW1zQXR0cik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluZGV4KytcclxuICAgIH1cclxuXHJcbiAgICBpZihzaW5nbGVJdGVtcy5xdWVyeVNlbGVjdG9yKCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpICE9IG51bGwpe1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5wZW9wbGVfX2luZm8tY29udGFpbmVyJyk7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLmZvdG8tcGVvcGxlJyk7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoaW1nUGVvcGxlKTtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChzaW5nbGVJdGVtc0luZm8pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChpbWdQZW9wbGUpO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKHNpbmdsZUl0ZW1zSW5mbyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxubWVudUZpbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vc3dhcGkuY28vYXBpL2ZpbG1zL1wiXHJcbiAgICBjb25zdCBmaWxtc0pTT04gPSBjb25uZWN0aW9uQVBJKHVybCk7XHJcbiAgICBmaWxtc0pTT04udGhlbihkYXRhID0+IGNyZWF0ZUxpc3RGaWxtcyhkYXRhKSlcclxuXHJcblxyXG4gICAgaWYoY29udGFpbmVySXRlbXMucXVlcnlTZWxlY3RvcignLmxpc3QtcGVvcGxlJykgIT0gbnVsbCB8fFxyXG4gICAgICAgIHNpbmdsZUl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5wZW9wbGVfX2luZm8tY29udGFpbmVyJykgIT0gbnVsbCl7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLmxpc3QtcGVvcGxlJyk7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLnBlb3BsZV9faW5mby1jb250YWluZXInKTtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuZm90by1wZW9wbGUnKTtcclxuXHJcbiAgICB9IGVsc2UgaWYoY29udGFpbmVySXRlbXMucXVlcnlTZWxlY3RvcignLmxpc3QtcGVvcGxlJykgIT0gbnVsbCl7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLmxpc3QtcGVvcGxlJyk7XHJcbiAgICB9XHJcblxyXG5cclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMaXN0RmlsbXMoZGF0YSkge1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgZmlsbUFyciA9IGRhdGEucmVzdWx0c1xyXG4gICAgY29uc3QgbGlzdEZpbG0gPSBjcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgbGlzdEZpbG0uc2V0QXR0cmlidXRlKCdjbGFzcycsJ2ZpbG1fY29udGFpbmVyJyk7XHJcblxyXG4gICAgZmlsbUFyci5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcclxuICAgICAgICBsZXQgc2luZ2xlRmlsbSA9IGNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuICAgICAgICBsZXQgaW1hZ2VGaWxtID0gY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgICAgICBsZXQgdGl0bGVGaWxtID0gY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkZpbG0gPSBjcmVhdGVFbGVtZW50KCdwJylcclxuXHJcbiAgICAgICAgc2luZ2xlRmlsbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbScsIGl0ZW1bJ3VybCddKVxyXG4gICAgICAgIHNpbmdsZUZpbG0uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSsrKVxyXG5cclxuICAgICAgICBpbWFnZUZpbG0uc2V0QXR0cmlidXRlKCdzcmMnLCdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2ZpbG1zLycraSsnLmpwZycpXHJcbiAgICAgICAgdGl0bGVGaWxtLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXVxyXG4gICAgICAgIGRlc2NyaXB0aW9uRmlsbS50ZXh0Q29udGVudCA9IGl0ZW1bJ29wZW5pbmdfY3Jhd2wnXS5zdWJzdHIoMCw1MCkgKyAnLi4uJ1xyXG5cclxuICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKHRpdGxlRmlsbSlcclxuICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKGltYWdlRmlsbSlcclxuICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uRmlsbSlcclxuICAgICAgICBsaXN0RmlsbS5hcHBlbmRDaGlsZChzaW5nbGVGaWxtKVxyXG4gICAgICAgIH1cclxuICAgIClcclxuICAgIGNvbnRhaW5lckl0ZW1zLmFwcGVuZENoaWxkKGxpc3RGaWxtKVxyXG4gICAgLy9zaG93SXRlbUluZm8oY3JlYXRlU2luZ2xlRmlsbSlcclxufVxyXG5cclxuXHJcbi8vIGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUZpbG0oZGF0YSkge1xyXG4vLyAgICAgY29uc3QgZmlsbUFyciA9IGRhdGE7XHJcbi8vICAgICBjb25zdCBTaW5nbGVGaWxtSW5mbyA9IGNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbi8vXHJcbi8vICAgICBsZXQgaW5kZXggPSAxO1xyXG4vL1xyXG4vLyAgICAgU2luZ2xlRmlsbUluZm8uc2V0QXR0cmlidXRlKCdjbGFzcycsICdmaWxtX19pbmZvLWNvbnRhaW5lcicpO1xyXG4vLyAgICAgZm9yKGxldCBrZXkgaW4gZmlsbUFycil7XHJcbi8vXHJcbi8vICAgICAgICAgaWYoaW5kZXggPD0gOCl7XHJcbi8vXHJcbi8vICAgICAgICAgICAgIGNvbnN0IFNpbmdsZUZpbG1BdHRyID0gY3JlYXRlRWxlbWVudCgnbGknKVxyXG4vLyAgICAgICAgICAgICBTaW5nbGVGaWxtQXR0ci50ZXh0Q29udGVudCA9IGtleSArICcgfCAnICsgZmlsbUFycltrZXldO1xyXG4vL1xyXG4vLyAgICAgICAgICAgICBTaW5nbGVGaWxtSW5mby5hcHBlbmRDaGlsZChTaW5nbGVGaWxtQXR0cik7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGluZGV4KytcclxuLy8gICAgIH1cclxuLy9cclxuLy8gICAgIGlmKHNpbmdsZUl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5maWxtX19pbmZvLWNvbnRhaW5lcicpICE9IG51bGwpe1xyXG4vLyAgICAgICAgIHJlbW92ZUVsZW1lbnQoJy5maWxtX19pbmZvLWNvbnRhaW5lcicpO1xyXG4vLyAgICAgICAgIHJlbW92ZUVsZW1lbnQoJy5mb3RvLWZpbG0nKTtcclxuLy8gICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChpbWdQZW9wbGUpO1xyXG4vLyAgICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKHNpbmdsZUl0ZW1zSW5mbyk7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGltZ1Blb3BsZSk7XHJcbi8vICAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoc2luZ2xlSXRlbXNJbmZvKTtcclxuLy8gICAgIH1cclxuLy8gfSJdfQ==
