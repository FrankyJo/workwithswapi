"use strict";var colorTheme=document.querySelector(".colorTheme");colorTheme.addEventListener("click",(function(){document.body.classList.contains("blackTheme")?document.body.classList.remove("blackTheme"):document.body.classList.add("blackTheme")}));var popUp=document.querySelector(".popUp"),popUpContent=document.querySelector(".popUpContent"),saveName=document.querySelector(".sendName");function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}saveName.addEventListener("click",(function(){var e=document.querySelector(".namePopUp");e&&(document.cookie="user="+e.value),popUp.style.display="none"})),document.addEventListener("DOMContentLoaded",(function(){getCookie("user")?(popUpContent.innerHTML="<p>Привет "+getCookie("user")+"</p>",popUp.style.display="block",saveName.textContent="Далее"):popUp.style.display="block"}));var menuPeople=document.querySelector(".for_people"),menuFilm=document.querySelector(".for_films"),containerItems=document.querySelector(".container__items"),singleItems=document.querySelector(".info__items");function connectionAPI(e){return createPreloader(),fetch(e).then((function(e){return e.json()})).then((function(e){return removePreloader(),e}))}function createElement(e,t){var n=document.createElement(e);return t&&n.setAttribute("class",t),n}function removeElement(e){document.querySelector(e).remove()}function createPreloader(){var e=document.createElement("div"),t=document.createElement("img");e.setAttribute("class","preloader"),t.setAttribute("src","https://i.gifer.com/AvGf.gif"),e.appendChild(t),document.querySelector(".container").appendChild(e)}function removePreloader(){document.querySelector(".preloader").remove()}function showItemInfo(e){containerItems.addEventListener("click",(function(t){var n=t.target,o=n.getAttribute("data-item");o&&(console.log(o),connectionAPI(o).then((function(t){return e(t,n)})))}))}function createListPeople(e){var t=1,n=createElement("ul");n.setAttribute("class","list-people"),e.results.map((function(e){var o=createElement("li");o.setAttribute("data-item",e.url),o.setAttribute("data-id",t++),o.textContent=e.name,n.appendChild(o)})),containerItems.appendChild(n),showItemInfo(createSingleItemsInfo)}function createSingleItemsInfo(e,t){var n=e,o=createElement("ul"),r=createElement("img"),i=1;for(var l in o.setAttribute("class","people__info-container"),r.setAttribute("src","https://starwars-visualguide.com/assets/img/characters/"+t.getAttribute("data-id")+".jpg"),r.setAttribute("class","foto-people"),n){if(i<=8){var c=createElement("li");c.textContent=l+" | "+n[l],o.appendChild(c)}i++}null!=singleItems.querySelector(".people__info-container")?(removeElement(".people__info-container"),removeElement(".foto-people"),singleItems.appendChild(r),singleItems.appendChild(o)):(singleItems.appendChild(r),singleItems.appendChild(o))}function createListFilms(e){var t=0,n=e.results,o=createElement("ul");o.setAttribute("class","film_container"),n.map((function(e){console.log(e);var n=createElement("li"),r=createElement("img"),i=createElement("h2"),l=createElement("p"),c=createElement("button");c.textContent="Show more",c.setAttribute("data-item",e.url),c.setAttribute("data-id",++t),r.setAttribute("src","https://starwars-visualguide.com/assets/img/films/"+t+".jpg"),i.textContent=e.title,l.textContent=e.opening_crawl.substr(0,50)+"...",n.appendChild(i),n.appendChild(r),n.appendChild(l),n.appendChild(c),o.appendChild(n)})),containerItems.appendChild(o),showItemInfo(createSingleFilm)}function createSingleFilm(e,t){var n=e;t.getAttribute("data-id");var o=createElement("img"),r=createElement("ul"),i=createElement("ul");o.setAttribute("src","https://starwars-visualguide.com/assets/img/films/"+t.getAttribute("data-id")+".jpg"),console.log(n);var l=1;for(var c in r.setAttribute("class","film__info-container"),n){if(l<=6){var a=createElement("li");a.textContent=c+" | "+n[c],r.appendChild(a)}l++}i.setAttribute("class","characters"),n.characters.map((function(e){connectionAPI(e).then((function(e){var t=createElement("li"),n=createElement("img"),o=e.url;o=o.substring(o.length-3,o.length-1),n.setAttribute("src","https://starwars-visualguide.com/assets/img/characters/"+o+".jpg"),t.textContent=e.name,i.appendChild(n),i.appendChild(t)}))})),null!=singleItems.querySelector(".film__info-container")?(removeElement(".film__info-container"),removeElement(".characters"),singleItems.appendChild(r),singleItems.appendChild(i)):(singleItems.appendChild(r),singleItems.appendChild(i))}menuPeople.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/people/").then((function(e){return createListPeople(e)})),null!=containerItems.querySelector(".list-people")||null!=singleItems.querySelector(".people__info-container")?(removeElement(".list-people"),removeElement(".people__info-container"),removeElement(".foto-people")):null!=containerItems.querySelector(".film_container")&&removeElement(".film_container"),null!=singleItems.querySelector(".film__info-container")&&(removeElement(".film__info-container"),removeElement(".characters"))})),menuFilm.addEventListener("click",(function(){connectionAPI("https://swapi.co/api/films/").then((function(e){return createListFilms(e)})),null!=containerItems.querySelector(".list-people")||null!=singleItems.querySelector(".people__info-container")?(removeElement(".list-people"),removeElement(".people__info-container"),removeElement(".foto-people")):null!=containerItems.querySelector(".list-people")&&removeElement(".list-people")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb2xvclRoZW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImFkZCIsInBvcFVwIiwicG9wVXBDb250ZW50Iiwic2F2ZU5hbWUiLCJnZXRDb29raWUiLCJuYW1lIiwibWF0Y2hlcyIsImNvb2tpZSIsIm1hdGNoIiwiUmVnRXhwIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsInVuZGVmaW5lZCIsIm5hbWVVc2VyIiwidmFsdWUiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsIm1lbnVQZW9wbGUiLCJtZW51RmlsbSIsImNvbnRhaW5lckl0ZW1zIiwic2luZ2xlSXRlbXMiLCJjb25uZWN0aW9uQVBJIiwidXJsIiwiY3JlYXRlUHJlbG9hZGVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsInJlbW92ZVByZWxvYWRlciIsImNyZWF0ZUVsZW1lbnQiLCJlbGVtdCIsImNsYXNzRWxlbWVudCIsIm5ld0VsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVFbGVtZW50IiwiZWxlbSIsInByZWxvZGFlciIsImltZ1ByZWxvYWRlciIsImFwcGVuZENoaWxkIiwic2hvd0l0ZW1JbmZvIiwiZnVuYyIsImUiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlTGlzdFBlb3BsZSIsImkiLCJsaXN0UGVvcGxlQ29udGFpbmVyIiwicmVzdWx0cyIsIm1hcCIsIml0ZW0iLCJsaXN0UGVvcGxlIiwiY3JlYXRlU2luZ2xlSXRlbXNJbmZvIiwicGVvcGxlQXJyIiwic2luZ2xlSXRlbXNJbmZvIiwiaW1nUGVvcGxlIiwiaW5kZXgiLCJrZXkiLCJzaW5nbGVJdGVtc0F0dHIiLCJjcmVhdGVMaXN0RmlsbXMiLCJmaWxtQXJyIiwibGlzdEZpbG0iLCJzaW5nbGVGaWxtIiwiaW1hZ2VGaWxtIiwidGl0bGVGaWxtIiwiZGVzY3JpcHRpb25GaWxtIiwiYnV0dG9TaG93TW9yZSIsInN1YnN0ciIsImNyZWF0ZVNpbmdsZUZpbG0iLCJpbWFnZSIsImZpbG1JbmZvIiwiY2hhcmFjdGVycyIsIlNpbmdsZUZpbG1BdHRyIiwiZWwiLCJuYW1lQ2hhcmFjdGVyIiwicGhvdG9DaGFyYWN0ZXIiLCJudW1DaGFyYWN0ZXIiLCJzdWJzdHJpbmciLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJBQUFBLGFBQUEsSUFBTUEsV0FBYUMsU0FBU0MsY0FBYyxlQUUxQ0YsV0FBV0csaUJBQWlCLFNBQVMsV0FDN0JGLFNBQVNHLEtBQUtDLFVBQVVDLFNBQVMsY0FDckNMLFNBQVNHLEtBQUtDLFVBQVVFLE9BQU8sY0FFM0JOLFNBQVNHLEtBQUtDLFVBQVVHLElBQUksaUJBS3BDLElBQU1DLE1BQVFSLFNBQVNDLGNBQWMsVUFDL0JRLGFBQWVULFNBQVNDLGNBQWMsaUJBRXRDUyxTQUFXVixTQUFTQyxjQUFjLGFBWXhDLFNBQVNVLFVBQVVDLEdBQ2YsSUFBSUMsRUFBVWIsU0FBU2MsT0FBT0MsTUFBTSxJQUFJQyxPQUNwQyxXQUFhSixFQUFLSyxRQUFRLCtCQUFnQyxRQUFVLGFBRXhFLE9BQU9KLEVBQVVLLG1CQUFtQkwsRUFBUSxTQUFNTSxFQWR0RFQsU0FBU1IsaUJBQWlCLFNBQVEsV0FDOUIsSUFBSWtCLEVBQVdwQixTQUFTQyxjQUFjLGNBRW5DbUIsSUFDQ3BCLFNBQVNjLE9BQVMsUUFBUU0sRUFBU0MsT0FFdkNiLE1BQU1jLE1BQU1DLFFBQVUsVUFhMUJ2QixTQUFTRSxpQkFBaUIsb0JBQW9CLFdBRXZDUyxVQUFVLFNBQ1RGLGFBQWFlLFVBQVksYUFBYWIsVUFBVSxRQUFRLE9BQ3hESCxNQUFNYyxNQUFNQyxRQUFVLFFBQ3RCYixTQUFTZSxZQUFjLFNBRXZCakIsTUFBTWMsTUFBTUMsUUFBVSxXQUs5QixJQUFNRyxXQUFhMUIsU0FBU0MsY0FBYyxlQUNwQzBC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QUFjNUQsWUFBY1ksRUFBSSxLQUNoQzZDLEVBQVdsQyxZQUFZc0MsR0FDdkJKLEVBQVdsQyxZQUFZcUMsU0FHMEIsTUFBdER4RCxZQUFZNUIsY0FBYywwQkFDekIyQyxjQUFjLHlCQUNkQSxjQUFjLGVBQ2RmLFlBQVltQixZQUFZaUMsR0FDeEJwRCxZQUFZbUIsWUFBWWtDLEtBRXhCckQsWUFBWW1CLFlBQVlpQyxHQUN4QnBELFlBQVltQixZQUFZa0MsSUFsTGhDeEQsV0FBV3hCLGlCQUFpQixTQUFTLFdBRWQ0QixjQURQLGdDQUVESSxNQUFLLFNBQUFHLEdBQUksT0FBSW1CLGlCQUFpQm5CLE1BR1csTUFBaERULGVBQWUzQixjQUFjLGlCQUMyQixNQUF4RDRCLFlBQVk1QixjQUFjLDRCQUMxQjJDLGNBQWMsZ0JBQ2RBLGNBQWMsMkJBQ2RBLGNBQWMsaUJBRTRDLE1BQW5EaEIsZUFBZTNCLGNBQWMsb0JBQ3BDMkMsY0FBYyxtQkFFdUMsTUFBdERmLFlBQVk1QixjQUFjLDJCQUN6QjJDLGNBQWMseUJBQ2RBLGNBQWMsbUJBeUR0QmpCLFNBQVN6QixpQkFBaUIsU0FBUyxXQUViNEIsY0FETiwrQkFFRkksTUFBSyxTQUFBRyxHQUFJLE9BQUlpQyxnQkFBZ0JqQyxNQUdhLE1BQWhEVCxlQUFlM0IsY0FBYyxpQkFDMkIsTUFBeEQ0QixZQUFZNUIsY0FBYyw0QkFDMUIyQyxjQUFjLGdCQUNkQSxjQUFjLDJCQUNkQSxjQUFjLGlCQUV5QyxNQUFoRGhCLGVBQWUzQixjQUFjLGlCQUNwQzJDLGNBQWMiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29sb3JUaGVtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvclRoZW1lJyk7XHJcblxyXG5jb2xvclRoZW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYoIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdibGFja1RoZW1lJykpe1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdibGFja1RoZW1lJylcclxuICAgIH0gZWxzZXtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2JsYWNrVGhlbWUnKVxyXG4gICAgfVxyXG5cclxufSlcclxuXHJcbmNvbnN0IHBvcFVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcFVwJyk7XHJcbmNvbnN0IHBvcFVwQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3BVcENvbnRlbnQnKTtcclxuXHJcbmNvbnN0IHNhdmVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmROYW1lJyk7XHJcblxyXG5zYXZlTmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgIGxldCBuYW1lVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lUG9wVXAnKVxyXG5cclxuICAgIGlmKG5hbWVVc2VyKXtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBcInVzZXI9XCIrbmFtZVVzZXIudmFsdWU7XHJcbiAgICB9XHJcbiAgICBwb3BVcC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn0pXHJcblxyXG4vL9C/0L7Qu9GD0YfQsNC10Lwg0LrRg9C60LhcclxuZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpIHtcclxuICAgIHZhciBtYXRjaGVzID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoXHJcbiAgICAgICAgXCIoPzpefDsgKVwiICsgbmFtZS5yZXBsYWNlKC8oW1xcLiQ/Knx7fVxcKFxcKVxcW1xcXVxcXFxcXC9cXCteXSkvZywgJ1xcXFwkMScpICsgXCI9KFteO10qKVwiXHJcbiAgICApKVxyXG4gICAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWRcclxufVxyXG5cclxuXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGlmKGdldENvb2tpZSgndXNlcicpKXtcclxuICAgICAgICBwb3BVcENvbnRlbnQuaW5uZXJIVE1MID0gJzxwPtCf0YDQuNCy0LXRgiAnK2dldENvb2tpZSgndXNlcicpKyc8L3A+JztcclxuICAgICAgICBwb3BVcC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIHNhdmVOYW1lLnRleHRDb250ZW50ID0gXCLQlNCw0LvQtdC1XCI7XHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH1cclxufSlcclxuXHJcblxyXG5jb25zdCBtZW51UGVvcGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcl9wZW9wbGUnKTtcclxuY29uc3QgbWVudUZpbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9yX2ZpbG1zJyk7XHJcbmNvbnN0IGNvbnRhaW5lckl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcl9faXRlbXMnKTtcclxuY29uc3Qgc2luZ2xlSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mb19faXRlbXMnKTtcclxuXHJcblxyXG4vL0Nvbm5lY3Rpb25cclxuZnVuY3Rpb24gY29ubmVjdGlvbkFQSSh1cmwpIHtcclxuICAgIGNyZWF0ZVByZWxvYWRlcigpXHJcbiAgICByZXR1cm4gZmV0Y2godXJsKVxyXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVQcmVsb2FkZXIoKVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgICAgIH0pXHJcbn1cclxuXHJcbi8vQ3JlYXRlIEVsZW1lbnRcclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtdCwgY2xhc3NFbGVtZW50KSB7XHJcbiAgICBsZXQgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbXQpO1xyXG4gICAgaWYgKGNsYXNzRWxlbWVudCkge1xyXG4gICAgICAgIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNsYXNzRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3RWxlbWVudDtcclxufVxyXG5cclxuLy9yZW1vdmUgRWxlbWVudFxyXG5mdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsZW0pIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbSkucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8vZnVuY3Rpb24gcHJlbG9hZGVyXHJcbmZ1bmN0aW9uIGNyZWF0ZVByZWxvYWRlcigpIHtcclxuICAgIGNvbnN0IHByZWxvZGFlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgaW1nUHJlbG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgIHByZWxvZGFlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3ByZWxvYWRlcicpO1xyXG4gICAgaW1nUHJlbG9hZGVyLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vaS5naWZlci5jb20vQXZHZi5naWYnKTtcclxuICAgIHByZWxvZGFlci5hcHBlbmRDaGlsZChpbWdQcmVsb2FkZXIpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLmFwcGVuZENoaWxkKHByZWxvZGFlcilcclxufVxyXG5cclxuLy9yZW1vdmVQcmVsb2FkZXJcclxuZnVuY3Rpb24gcmVtb3ZlUHJlbG9hZGVyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlcicpLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vL3Nob3dJdGVtSW5mb1xyXG5mdW5jdGlvbiBzaG93SXRlbUluZm8oZnVuYykge1xyXG4gICAgY29udGFpbmVySXRlbXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbScpO1xyXG4gICAgICAgIGlmICh1cmwpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codXJsKVxyXG4gICAgICAgICAgICBjb25zdCBzaW5nbGVJdGVtcyA9IGNvbm5lY3Rpb25BUEkodXJsKTtcclxuICAgICAgICAgICAgc2luZ2xlSXRlbXMudGhlbihkYXRhID0+IGZ1bmMoZGF0YSwgdGFyZ2V0KSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbm1lbnVQZW9wbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vc3dhcGkuY28vYXBpL3Blb3BsZS9cIlxyXG4gICAgY29uc3QgcGVvcGxlSlNPTiA9IGNvbm5lY3Rpb25BUEkodXJsKTtcclxuICAgIHBlb3BsZUpTT04udGhlbihkYXRhID0+IGNyZWF0ZUxpc3RQZW9wbGUoZGF0YSkpXHJcblxyXG5cclxuICAgIGlmIChjb250YWluZXJJdGVtcy5xdWVyeVNlbGVjdG9yKCcubGlzdC1wZW9wbGUnKSAhPSBudWxsIHx8XHJcbiAgICAgICAgc2luZ2xlSXRlbXMucXVlcnlTZWxlY3RvcignLnBlb3BsZV9faW5mby1jb250YWluZXInKSAhPSBudWxsKSB7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLmxpc3QtcGVvcGxlJyk7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLnBlb3BsZV9faW5mby1jb250YWluZXInKTtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuZm90by1wZW9wbGUnKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5lckl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5maWxtX2NvbnRhaW5lcicpICE9IG51bGwpIHtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuZmlsbV9jb250YWluZXInKTtcclxuICAgIH1cclxuICAgIGlmKHNpbmdsZUl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5maWxtX19pbmZvLWNvbnRhaW5lcicpICE9IG51bGwpe1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5maWxtX19pbmZvLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5jaGFyYWN0ZXJzJyk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMaXN0UGVvcGxlKGRhdGEpIHtcclxuICAgIGxldCBpID0gMTtcclxuICAgIGNvbnN0IGxpc3RQZW9wbGVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgbGlzdFBlb3BsZUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpc3QtcGVvcGxlJyk7XHJcblxyXG4gICAgZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBsZXQgbGlzdFBlb3BsZSA9IGNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuICAgICAgICAgICAgbGlzdFBlb3BsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbScsIGl0ZW1bJ3VybCddKVxyXG4gICAgICAgICAgICBsaXN0UGVvcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGkrKylcclxuICAgICAgICAgICAgbGlzdFBlb3BsZS50ZXh0Q29udGVudCA9IGl0ZW1bJ25hbWUnXTtcclxuICAgICAgICAgICAgbGlzdFBlb3BsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0UGVvcGxlKVxyXG4gICAgICAgIH1cclxuICAgIClcclxuICAgIGNvbnRhaW5lckl0ZW1zLmFwcGVuZENoaWxkKGxpc3RQZW9wbGVDb250YWluZXIpO1xyXG4gICAgc2hvd0l0ZW1JbmZvKGNyZWF0ZVNpbmdsZUl0ZW1zSW5mbylcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUl0ZW1zSW5mbyhkYXRhLCB0YXJnZXQpIHtcclxuICAgIGNvbnN0IHBlb3BsZUFyciA9IGRhdGE7XHJcbiAgICBjb25zdCBzaW5nbGVJdGVtc0luZm8gPSBjcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgY29uc3QgaW1nUGVvcGxlID0gY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgbGV0IGluZGV4ID0gMTtcclxuXHJcbiAgICBzaW5nbGVJdGVtc0luZm8uc2V0QXR0cmlidXRlKCdjbGFzcycsICdwZW9wbGVfX2luZm8tY29udGFpbmVyJyk7XHJcbiAgICBpbWdQZW9wbGUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cHM6Ly9zdGFyd2Fycy12aXN1YWxndWlkZS5jb20vYXNzZXRzL2ltZy9jaGFyYWN0ZXJzLycgKyB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgKyAnLmpwZycpO1xyXG4gICAgaW1nUGVvcGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZm90by1wZW9wbGUnKTtcclxuICAgIGZvciAobGV0IGtleSBpbiBwZW9wbGVBcnIpIHtcclxuXHJcbiAgICAgICAgaWYgKGluZGV4IDw9IDgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZUl0ZW1zQXR0ciA9IGNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuICAgICAgICAgICAgc2luZ2xlSXRlbXNBdHRyLnRleHRDb250ZW50ID0ga2V5ICsgJyB8ICcgKyBwZW9wbGVBcnJba2V5XTtcclxuXHJcbiAgICAgICAgICAgIHNpbmdsZUl0ZW1zSW5mby5hcHBlbmRDaGlsZChzaW5nbGVJdGVtc0F0dHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbmRleCsrXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNpbmdsZUl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5wZW9wbGVfX2luZm8tY29udGFpbmVyJykgIT0gbnVsbCkge1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5wZW9wbGVfX2luZm8tY29udGFpbmVyJyk7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCgnLmZvdG8tcGVvcGxlJyk7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoaW1nUGVvcGxlKTtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChzaW5nbGVJdGVtc0luZm8pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChpbWdQZW9wbGUpO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKHNpbmdsZUl0ZW1zSW5mbyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxubWVudUZpbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vc3dhcGkuY28vYXBpL2ZpbG1zL1wiXHJcbiAgICBjb25zdCBmaWxtc0pTT04gPSBjb25uZWN0aW9uQVBJKHVybCk7XHJcbiAgICBmaWxtc0pTT04udGhlbihkYXRhID0+IGNyZWF0ZUxpc3RGaWxtcyhkYXRhKSlcclxuXHJcblxyXG4gICAgaWYgKGNvbnRhaW5lckl0ZW1zLnF1ZXJ5U2VsZWN0b3IoJy5saXN0LXBlb3BsZScpICE9IG51bGwgfHxcclxuICAgICAgICBzaW5nbGVJdGVtcy5xdWVyeVNlbGVjdG9yKCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpICE9IG51bGwpIHtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcubGlzdC1wZW9wbGUnKTtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcucGVvcGxlX19pbmZvLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5mb3RvLXBlb3BsZScpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVySXRlbXMucXVlcnlTZWxlY3RvcignLmxpc3QtcGVvcGxlJykgIT0gbnVsbCkge1xyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQoJy5saXN0LXBlb3BsZScpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0pXHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGlzdEZpbG1zKGRhdGEpIHtcclxuICAgIGxldCBpID0gMDtcclxuICAgIGNvbnN0IGZpbG1BcnIgPSBkYXRhLnJlc3VsdHNcclxuICAgIGNvbnN0IGxpc3RGaWxtID0gY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgIGxpc3RGaWxtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmlsbV9jb250YWluZXInKTtcclxuXHJcbiAgICBmaWxtQXJyLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcclxuICAgICAgICAgICAgbGV0IHNpbmdsZUZpbG0gPSBjcmVhdGVFbGVtZW50KCdsaScpXHJcbiAgICAgICAgICAgIGxldCBpbWFnZUZpbG0gPSBjcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgICAgICAgICBsZXQgdGl0bGVGaWxtID0gY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gICAgICAgICAgICBsZXQgZGVzY3JpcHRpb25GaWxtID0gY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgICAgICAgICAgIGxldCBidXR0b1Nob3dNb3JlID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvU2hvd01vcmUudGV4dENvbnRlbnQgPSAnU2hvdyBtb3JlJztcclxuICAgICAgICAgICAgYnV0dG9TaG93TW9yZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbScsIGl0ZW1bJ3VybCddKVxyXG4gICAgICAgICAgICBidXR0b1Nob3dNb3JlLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsICsraSlcclxuXHJcbiAgICAgICAgICAgIGltYWdlRmlsbS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2ZpbG1zLycgKyBpICsgJy5qcGcnKVxyXG4gICAgICAgICAgICB0aXRsZUZpbG0udGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uRmlsbS50ZXh0Q29udGVudCA9IGl0ZW1bJ29wZW5pbmdfY3Jhd2wnXS5zdWJzdHIoMCwgNTApICsgJy4uLidcclxuXHJcblxyXG4gICAgICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKHRpdGxlRmlsbSlcclxuICAgICAgICAgICAgc2luZ2xlRmlsbS5hcHBlbmRDaGlsZChpbWFnZUZpbG0pXHJcbiAgICAgICAgICAgIHNpbmdsZUZpbG0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25GaWxtKVxyXG4gICAgICAgICAgICBzaW5nbGVGaWxtLmFwcGVuZENoaWxkKGJ1dHRvU2hvd01vcmUpXHJcbiAgICAgICAgICAgIGxpc3RGaWxtLmFwcGVuZENoaWxkKHNpbmdsZUZpbG0pXHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG4gICAgY29udGFpbmVySXRlbXMuYXBwZW5kQ2hpbGQobGlzdEZpbG0pXHJcbiAgICBzaG93SXRlbUluZm8oY3JlYXRlU2luZ2xlRmlsbSlcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUZpbG0oZGF0YSwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBmaWxtQXJyID0gZGF0YTtcclxuXHJcbiAgICB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJylcclxuXHJcbiAgICBsZXQgaW1hZ2UgPSBjcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgbGV0IGZpbG1JbmZvID0gY3JlYXRlRWxlbWVudCgndWwnKVxyXG4gICAgbGV0IGNoYXJhY3RlcnMgPSBjcmVhdGVFbGVtZW50KCd1bCcpXHJcblxyXG4gICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cHM6Ly9zdGFyd2Fycy12aXN1YWxndWlkZS5jb20vYXNzZXRzL2ltZy9maWxtcy8nICsgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpICsgJy5qcGcnKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGZpbG1BcnIpO1xyXG4gICAgbGV0IGluZGV4ID0gMTtcclxuXHJcbiAgICBmaWxtSW5mby5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZpbG1fX2luZm8tY29udGFpbmVyJyk7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gZmlsbUFycikge1xyXG4gICAgICAgIGlmIChpbmRleCA8PSA2KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFNpbmdsZUZpbG1BdHRyID0gY3JlYXRlRWxlbWVudCgnbGknKVxyXG4gICAgICAgICAgICBTaW5nbGVGaWxtQXR0ci50ZXh0Q29udGVudCA9IGtleSArICcgfCAnICsgZmlsbUFycltrZXldO1xyXG5cclxuICAgICAgICAgICAgZmlsbUluZm8uYXBwZW5kQ2hpbGQoU2luZ2xlRmlsbUF0dHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbmRleCsrXHJcbiAgICB9XHJcblxyXG4gICAgY2hhcmFjdGVycy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnY2hhcmFjdGVycycpO1xyXG4gICAgZmlsbUFyclsnY2hhcmFjdGVycyddLm1hcChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBsZXQgc2luZ2xlQ2hhcmFjdGVyID0gY29ubmVjdGlvbkFQSShlbCk7XHJcbiAgICAgICAgc2luZ2xlQ2hhcmFjdGVyLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBuYW1lQ2hhcmFjdGVyID0gY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgbGV0IHBob3RvQ2hhcmFjdGVyID0gY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbnVtQ2hhcmFjdGVyID0gZGF0YVsndXJsJ11cclxuICAgICAgICAgICAgbnVtQ2hhcmFjdGVyID0gbnVtQ2hhcmFjdGVyLnN1YnN0cmluZyhudW1DaGFyYWN0ZXIubGVuZ3RoIC0gMywgbnVtQ2hhcmFjdGVyLmxlbmd0aCAtIDEpXHJcblxyXG4gICAgICAgICAgICBwaG90b0NoYXJhY3Rlci5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3N0YXJ3YXJzLXZpc3VhbGd1aWRlLmNvbS9hc3NldHMvaW1nL2NoYXJhY3RlcnMvJyArIG51bUNoYXJhY3RlciArICcuanBnJylcclxuICAgICAgICAgICAgbmFtZUNoYXJhY3Rlci50ZXh0Q29udGVudCA9IGRhdGFbJ25hbWUnXVxyXG4gICAgICAgICAgICBjaGFyYWN0ZXJzLmFwcGVuZENoaWxkKHBob3RvQ2hhcmFjdGVyKVxyXG4gICAgICAgICAgICBjaGFyYWN0ZXJzLmFwcGVuZENoaWxkKG5hbWVDaGFyYWN0ZXIpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBpZihzaW5nbGVJdGVtcy5xdWVyeVNlbGVjdG9yKCcuZmlsbV9faW5mby1jb250YWluZXInKSAhPSBudWxsKXtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuZmlsbV9faW5mby1jb250YWluZXInKTtcclxuICAgICAgICByZW1vdmVFbGVtZW50KCcuY2hhcmFjdGVycycpO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGZpbG1JbmZvKTtcclxuICAgICAgICBzaW5nbGVJdGVtcy5hcHBlbmRDaGlsZChjaGFyYWN0ZXJzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2luZ2xlSXRlbXMuYXBwZW5kQ2hpbGQoZmlsbUluZm8pO1xyXG4gICAgICAgIHNpbmdsZUl0ZW1zLmFwcGVuZENoaWxkKGNoYXJhY3RlcnMpO1xyXG4gICAgfVxyXG59Il19
